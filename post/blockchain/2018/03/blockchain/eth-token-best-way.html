<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="发代币历经波折，现在将过程记录如下。win适用，mac/linux更适用。 必备技能：1.科学上网条件。2.会使用npm 3.有足够的以太坊（0.2eth足矣）">
<meta name="keywords" content="区块链,以太坊,token,代币">
<meta property="og:type" content="article">
<meta property="og:title" content="以太坊发token最佳实践">
<meta property="og:url" content="sudobash.cn/post/blockchain/2018/03/blockchain/eth-token-best-way.html">
<meta property="og:site_name" content="Web开发笔记">
<meta property="og:description" content="发代币历经波折，现在将过程记录如下。win适用，mac/linux更适用。 必备技能：1.科学上网条件。2.会使用npm 3.有足够的以太坊（0.2eth足矣）">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-10-19T05:17:04.091Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="以太坊发token最佳实践">
<meta name="twitter:description" content="发代币历经波折，现在将过程记录如下。win适用，mac/linux更适用。 必备技能：1.科学上网条件。2.会使用npm 3.有足够的以太坊（0.2eth足矣）">






  <link rel="canonical" href="sudobash.cn/post/blockchain/2018/03/blockchain/eth-token-best-way.html"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>以太坊发token最佳实践 | Web开发笔记</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4921dd99e49896e2d95d6f737bf8e9fd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Web开发笔记</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者的点滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
          
  
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-编程语言">
    <a href="/categories/coding/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-code"></i> <br />编程语言</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-工作点滴">
    <a href="/categories/in-work/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tasks"></i> <br />工作点滴</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-服务运维">
    <a href="/categories/devops/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-cogs"></i> <br />服务运维</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-区块链">
    <a href="/categories/blockchain/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-link"></i> <br />区块链</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-阅读">
    <a href="/categories/read/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-book"></i> <br />阅读</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-随笔">
    <a href="/categories/writing/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-edit"></i> <br />随笔</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
</li>

      

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="sudobash.cn/post/blockchain/2018/03/blockchain/eth-token-best-way.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tyler">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Web开发笔记">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">以太坊发token最佳实践</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-30T00:00:00+08:00">2018-03-30</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">区块链</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>发代币历经波折，现在将过程记录如下。win适用，mac/linux更适用。</p>
<p>必备技能：1.科学上网条件。2.会使用npm 3.有足够的以太坊（0.2eth足矣）</p>
<a id="more"></a>
<p>发token其实是部署智能合约。要经历5个步骤：</p>
<ul>
<li>搭建编译环境</li>
<li>编写智能合约</li>
<li>编译合约</li>
<li>部署合约</li>
<li>与合约交互</li>
</ul>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li>科学上网条件</li>
<li>chrome浏览器，安装metamask插件：<a href="https://metamask.io/" target="_blank" rel="noopener">https://metamask.io/</a></li>
<li>node环境，npm命令，本文使用的是淘宝技术团队提供的cnpm</li>
<li>下载geth： <a href="https://geth.ethereum.org/downloads/" target="_blank" rel="noopener">https://geth.ethereum.org/downloads/</a></li>
</ul>
<h2 id="搭建编译环境"><a href="#搭建编译环境" class="headerlink" title="搭建编译环境"></a>搭建编译环境</h2><p>写智能合约用的最多的是solidity语言，然而编译环境实在是懒得吐槽。有在线编译，有框架编译。不过最推荐的是<strong>搭建在本地的在线编译</strong>。</p>
<h3 id="在线编译"><a href="#在线编译" class="headerlink" title="在线编译"></a>在线编译</h3><p><a href="http://remix.ethereum.org/" target="_blank" rel="noopener">online版本</a> 可能卡，可能慢</p>
<p>最好用最不好用的都是这个东西……好用是因为确实好用，不好用是因为科学上网都解决不了他慢的问题。所以最好下载本地版的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#安装remix</span><br><span class="line">cnpm install remix-ide -g</span><br><span class="line"></span><br><span class="line">#导入有eth的账户，要用这个账户来部署合约呢</span><br><span class="line">geth account import private.key</span><br><span class="line"></span><br><span class="line">#本地启动geth 开启rpc和控制台</span><br><span class="line">#这里起的是一个孤立节点，是为了不与其他节点同步数据</span><br><span class="line">geth --nodiscover console --rpc --rpcapi &apos;web3,eth,debug&apos; --rpcport 8545 --rpccorsdomain &apos;*&apos;</span><br><span class="line"></span><br><span class="line">#另开一个控制台！另开一个控制台！另开一个控制台！</span><br><span class="line">#启动remix，默认链接本地8545端口的geth的rpc（就是上面启动那个）</span><br><span class="line">remix-ide</span><br></pre></td></tr></table></figure></p>
<p>浏览器访问 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a> 就能看到编译器了。虽然也是比较慢，但总算是能用了。</p>
<h3 id="其他编译器"><a href="#其他编译器" class="headerlink" title="其他编译器"></a>其他编译器</h3><h4 id="truffle"><a href="#truffle" class="headerlink" title="truffle"></a>truffle</h4><p>开发框架，不仅带编译功能，还带部署功能。然而东西略复杂。不推荐用。如果非要用。自行google</p>
<h4 id="solc"><a href="#solc" class="headerlink" title="solc"></a>solc</h4><p>之前没调通，现在调通了，有空补上。这个也蛮好用的。</p>
<h2 id="编写智能合约"><a href="#编写智能合约" class="headerlink" title="编写智能合约"></a>编写智能合约</h2><p>官方推荐的solidity</p>
<ul>
<li>github：<a href="https://github.com/ethereum/solidity/tree/v0.4.21" target="_blank" rel="noopener">https://github.com/ethereum/solidity/tree/v0.4.21</a></li>
<li>官方文档：<a href="http://solidity.readthedocs.io/en/v0.4.21/" target="_blank" rel="noopener">http://solidity.readthedocs.io/en/v0.4.21/</a></li>
</ul>
<p>solidity更新了好几版了。学起来不算太难。不过<strong>以发币为目的就不需要学太深入了</strong>。直接用ERC20官方模板就可以。</p>
<ul>
<li>官网：<a href="http://eips.ethereum.org/EIPS/eip-20" target="_blank" rel="noopener">http://eips.ethereum.org/EIPS/eip-20</a></li>
<li>github：<a href="https://github.com/ConsenSys/Tokens" target="_blank" rel="noopener">https://github.com/ConsenSys/Tokens</a></li>
</ul>
<p><strong>合约就在</strong><a href="https://github.com/ConsenSys/Tokens/tree/master/contracts/eip20" target="_blank" rel="noopener">https://github.com/ConsenSys/Tokens/tree/master/contracts/eip20</a></p>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>浏览器访问 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a> 打开编译器。</p>
<p>左上角有个文件夹的标识，打开到下载的目录。选中三个文件一起打开。</p>
<p>点击右上角<code>start to compile</code></p>
<p>可能会报一些<strong>黄色的warning</strong> 不需要理会，只要不是<strong>红色error</strong>就可以。</p>
<p>然后在<code>start to compile</code>下面的选择框中选中<code>EIP20</code>，然后点击旁边的<code>Details</code>按钮(可能要等几秒钟)。</p>
<p>然后弹出框展示的就是部署需要的数据。需要的是<code>BYTECODE</code>和<code>ABI</code>。而<code>WEB3DEPLOY</code>将<code>BYTECODE</code>和<code>ABI</code>包装成了js脚本，可以直接在geth控制台执行来部署合约。只需要稍加修改就可以使用。</p>
<p>接下来开始部署。</p>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>部署合约是要消耗eth的，消耗的eth被称为gas，又叫汽油，手续费。部署由矿工来搞定，gas就是要支付的酬劳。</p>
<p>部署合约的操作要转换成多个step，每个step的执行都要消耗gas。最终消耗的eth量由两个参数来控制：<code>gasPrice</code>和<code>gas</code>。前者表示每个step消耗的eth，后者表示限定<code>step</code>的最多执行数。最终消耗的eth是 <code>step * gas</code>。</p>
<p>本文部署<code>gasPrice</code>设定的是<code>2GWei</code>，略慢，可设定到4GWei。</p>
<p>但是<code>gas</code>的值一定要足够大，因为<code>gas</code>限定了执行step数，<strong>如果step执行完而合约没部署完，那么操作回滚，gas不退。</strong></p>
<p>这是第一个坑，我第一次设置的gas为50000，结果gas清零，部署失败！因此gas不妨设置得尽可能大。之所以说尽肯能，是因为gas的上限受限于两个条件：1.以太坊规定的上限，2.持有的eth量</p>
<p>gas设置的前提是要求账户有足够的eth，eth保有量必须大于设置的<code>gas*gasPrice</code>。用不完的gas会退回来。这就意味着部署系统的账户，<strong>必须能用<code>eth.getBalance()</code>查到余额，并且余额大于<code>gas*gasPrice</code></strong></p>
<blockquote>
<p>假设由<code>eth.accounts[0]</code>来部署，我们称为<strong>部署账户</strong></p>
</blockquote>
<p>部署分两步：</p>
<ol>
<li>加入变量，生成部署的操作码</li>
<li>支付gas，将操作码广播</li>
</ol>
<blockquote>
<p>不仅是部署，任何在以太坊网络的操作都分两步：生成操作码，广播操作码。</p>
</blockquote>
<p>部署有两种方式：</p>
<ol>
<li>在以太坊节点，执行上面复制的<code>WEB3DEPLOY</code>代码</li>
<li>在以太坊节点获取部署的操作码，用metamask广播部署</li>
</ol>
<p>第1种方法要求节点必须能查到<code>eth.accounts[0]</code>的余额。因为广播时会检查广播人的余额。如果查不到是无法广播的。<strong>只有节点数据同步到一定程度才能查到余额</strong>。所谓的一定程度是指：账户所在的数据块被同步。一般来说这是个短时间内无法完成的事情。</p>
<p>所以只能看<strong>第2个部署的方法</strong></p>
<h3 id="生成操作码"><a href="#生成操作码" class="headerlink" title="生成操作码"></a>生成操作码</h3><p><code>WEB3DEPLOY</code>中是直接部署的语句，需要修改成获取操作码的语句。先看下<code>WEB3DEPLOY</code>的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var _initialAmount = /* var of type uint256 here */ ; //要发的token的数量</span><br><span class="line">var _tokenName = /* var of type string here */ ; //token的名字</span><br><span class="line">var _decimalUnits = /* var of type uint8 here */ ; //token精度</span><br><span class="line">var _tokenSymbol = /* var of type string here */ ; //token的symbol</span><br><span class="line">var eip20Contract = web3.eth.contract([&#123;...&#125;]); //contract括号内是abi，此处有省略</span><br><span class="line">var eip20 = eip20Contract.new(                  //部署语句</span><br><span class="line">   _initialAmount,</span><br><span class="line">   _tokenName,</span><br><span class="line">   _decimalUnits,</span><br><span class="line">   _tokenSymbol,</span><br><span class="line">   &#123;</span><br><span class="line">     from: web3.eth.accounts[0], </span><br><span class="line">     data: &apos;0x6060604xxxxxxb0029&apos;,  //bytecode，此处有省略</span><br><span class="line">     gas: &apos;4700000&apos;</span><br><span class="line">   &#125;, function (e, contract)&#123;</span><br><span class="line">    console.log(e, contract);</span><br><span class="line">    if (typeof contract.address !== &apos;undefined&apos;) &#123;</span><br><span class="line">         console.log(&apos;Contract mined! address: &apos; + contract.address + &apos; transactionHash: &apos; + contract.transactionHash);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></p>
<p>在上面我们已经把部署账户的私钥添加进来，就用这个账户来生成操作码。然后在上面打开的geth终端中执行下面命令。</p>
<blockquote>
<p>这里要注意精度。假设发行100万个token，最小单位是0.01。那么精度就是100，token的总量应该是 100万*100，即 100000000。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//从上面获取abi（第5行）和bytecode（第12行）赋值到下面两个变量</span><br><span class="line">&gt; var abi = [&#123;.....&#125;]</span><br><span class="line">&gt; var bytecode = &apos;0x6060604xxxxxxb0029&apos;</span><br><span class="line">&gt; var c = eth.contract(abi)</span><br><span class="line">&gt; var cData = &#123;from:eth.accounts[0], data:bytecode&#125; //部署账户</span><br><span class="line">&gt; var dcode = c.new.getData(&apos;100000000&apos;, &apos;myEth&apos;, 100, &apos;METH&apos;, cData)</span><br></pre></td></tr></table></figure>
<p>执行过后上面的dcode就是要广播的操作码了。</p>
<h3 id="metamask部署"><a href="#metamask部署" class="headerlink" title="metamask部署"></a>metamask部署</h3><p>chrome安装metamask插件后，导入账户。然后点击send。</p>
<ul>
<li>Recipient Address 留空</li>
<li>amount 填0</li>
<li>transaction Data中填上操作码。点击next</li>
<li>GasLimit: 5000000 GasPrice:3Gwei 点击submit 等待成功</li>
</ul>
<p>部署需要一段时间。部署完成后点击部署成功的合约，可以跳到etherscan.io查看区块。这里要拿到合约地址。</p>
<h3 id="查看token"><a href="#查看token" class="headerlink" title="查看token"></a>查看token</h3><p>还是因为数据同步的问题，只能在metamask中查看。</p>
<p>buy和send按钮下面有个token。点开后选择add token，填上获取到的合约地址，就能查看token余额了。</p>
<h2 id="与合约交互"><a href="#与合约交互" class="headerlink" title="与合约交互"></a>与合约交互</h2><p>交互分读（查余额）和写（转账）。读不需要广播，不需要消耗gas，但转账属于写需要广播，就要消耗gas。</p>
<p>这里的转账本质是发消息，同样由于数据同步的问题，只能在geth控制台生成广播操作码，使用metamask广播。</p>
<blockquote>
<p>这里有个天坑，操作前一定要设置默认账户<code>eth.defaultAccount</code>否则转账操会一直提示<code>invalid address</code> 设置的defaultAcount是谁，操作就由谁来执行。</p>
</blockquote>
<p>与合约交互，无论读写，都需要获取到合约的实例。获取合约实例需要abi和合约地址。以下还是geth中操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; eth.defaultAccount = eth.accounts[0]</span><br><span class="line">&gt; abi = [&#123;.....&#125;]</span><br><span class="line">&gt; add = &apos;0xaaaaaaaa&apos;</span><br><span class="line">&gt; cInstance = eth.contract(abi).at(add) //cInstance即为合约实例</span><br><span class="line">&gt; cInstance.balanceOf(eth.accounts[0]) //查询余额。结果不显示小数点，所以应该是1个亿</span><br><span class="line">&gt; cInstance.transfer.getData(eth.accounts[1], 10000) //向另一个地址转100，获取操作码 到metamask send</span><br></pre></td></tr></table></figure></p>
<p>更多与合约交互：<a href="/post/blockchain/2018/04/blockchain/eth-interact-with-contract.html" title="以太坊与智能合约交互">以太坊与智能合约交互</a></p>
<h3 id="其他交互"><a href="#其他交互" class="headerlink" title="其他交互"></a>其他交互</h3><p>所有的交互都是调用合约里定义的函数。如果有同步数据的前提，就只能先获取操作码，然后在metamask上广播。</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/blockchain/" rel="tag"># 区块链</a>
          
            <a href="/tags/ethereum/" rel="tag"># 以太坊</a>
          
            <a href="/tags/token/" rel="tag"># token</a>
          
            <a href="/tags/代币/" rel="tag"># 代币</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/blockchain/2018/03/blockchain/eth-data.html" rel="next" title="以太坊资料整理">
                <i class="fa fa-chevron-left"></i> 以太坊资料整理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/devops/2018/03/server/linux-set-path-gracefully.html" rel="prev" title="优雅的设置linux环境变量">
                优雅的设置linux环境变量 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Tyler</p>
              <p class="site-description motion-element" itemprop="description">web开发 | javascript | js | php | node | nginx | mysql | linux</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">56</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">42</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#准备工作"><span class="nav-number">1.</span> <span class="nav-text">准备工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搭建编译环境"><span class="nav-number">2.</span> <span class="nav-text">搭建编译环境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在线编译"><span class="nav-number">2.1.</span> <span class="nav-text">在线编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他编译器"><span class="nav-number">2.2.</span> <span class="nav-text">其他编译器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#truffle"><span class="nav-number">2.2.1.</span> <span class="nav-text">truffle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#solc"><span class="nav-number">2.2.2.</span> <span class="nav-text">solc</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写智能合约"><span class="nav-number">3.</span> <span class="nav-text">编写智能合约</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译"><span class="nav-number">4.</span> <span class="nav-text">编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#部署"><span class="nav-number">5.</span> <span class="nav-text">部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#生成操作码"><span class="nav-number">5.1.</span> <span class="nav-text">生成操作码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metamask部署"><span class="nav-number">5.2.</span> <span class="nav-text">metamask部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看token"><span class="nav-number">5.3.</span> <span class="nav-text">查看token</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#与合约交互"><span class="nav-number">6.</span> <span class="nav-text">与合约交互</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#其他交互"><span class="nav-number">6.1.</span> <span class="nav-text">其他交互</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tyler</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.1.0</div>




<script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
<script>mermaid.initialize({startOnLoad:true});</script>

        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
